<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="coummunity">

	<select id="getBoardList" resultType="BoardVo">
		
		SELECT 
		    NO,
		    USER_NO,
		    CAT_NO,
		    TITLE,
		    CONTENT,
		    ENROLL_DATE,
		    MODIFY_DATE,
		    FILE_PATH,
		    HIT
		FROM BOARD
		WHERE STATUS = 'O'
		<choose>
			
			<when test="num != null and num !=''">
				AND CAT_NO = 4
				ORDER BY NO DESC 
				FETCH FIRST #{num} 
				ROWS ONLY 
			</when>
			
			<when test="catNo != null and catNo !=''">
				AND CAT_NO = #{catNo}
				ORDER BY NO DESC 
			</when>
			
			
		</choose>
			
		
		
		
	</select>


	<insert id="write" >
	    INSERT INTO BOARD (
	        NO,
	        USER_NO,
	        CAT_NO,
	        TITLE,
	        CONTENT
	        <if test="file != null and !file.equals('')">
	            , FILE_PATH
	        </if>
	    ) VALUES (
	        SEQ_BOARD_NO.NEXTVAL,
	        #{userNo},
	        #{catNo},
	        #{title},
	        #{content}
	        <if test="file != null and !file.equals('')">
	            , #{file}
	        </if>
	    )
	</insert>

  
</mapper>